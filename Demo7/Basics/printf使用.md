# C 库函数 - printf()

C 库函数 **int printf(const char \*format, ...)** 发送格式化输出到标准输出 stdout。

printf() 函数的调用格式为:

```
printf("<格式化字符串>", <参量表>);
```

## 声明

下面是 printf() 函数的声明。

```
int printf(const char *format, ...)
```

## 参数

- **format** -- 这是字符串，包含了要被写入到标准输出 stdout 的文本。它可以包含嵌入的 format 标签，format 标签可被随后的附加参数中指定的值替换，并按需求进行格式化。format 标签属性是 **%[flags][width][.precision][length]specifier**，具体讲解如下：

| 格式字符 | 意义                                                         |
| :------- | :----------------------------------------------------------- |
| a, A     | 以十六进制形式输出浮点数(C99 新增)。实例 **printf("pi=%a\n", 3.14);** 输出 **pi=0x1.91eb86p+1**。 |
|          |                                                              |
| d        | 以十进制形式输出带符号整数(正数不输出符号)                   |
| o        | 以八进制形式输出无符号整数(不输出前缀0)                      |
| x,X      | 以十六进制形式输出无符号整数(不输出前缀Ox)                   |
| u        | 以十进制形式输出无符号整数                                   |
| f        | 以小数形式输出单、双精度实数                                 |
| e,E      | 以指数形式输出单、双精度实数                                 |
| g,G      | 以%f或%e中较短的输出宽度输出单、双精度实数                   |
| c        | 输出单个字符                                                 |
| s        | 输出字符串                                                   |
| p        | 输出指针地址                                                 |
| lu       | 32位无符号整数                                               |
| llu      | 64位无符号整数                                               |



| flags（标识） | 描述                                                         |
| :------------ | :----------------------------------------------------------- |
| -             | 在给定的字段宽度内左对齐，默认是右对齐（参见 width 子说明符）。 |
| +             | 强制在结果之前显示加号或减号（+ 或 -），即正数前面会显示 + 号。默认情况下，只有负数前面会显示一个 - 号。 |
| 空格          | 如果没有写入任何符号，则在该值前面插入一个空格。             |
| #             | 与 o、x 或 X 说明符一起使用时，非零值前面会分别显示 0、0x 或 0X。 与 e、E 和 f 一起使用时，会强制输出包含一个小数点，即使后边没有数字时也会显示小数点。默认情况下，如果后边没有数字时候，不会显示显示小数点。 与 g 或 G 一起使用时，结果与使用 e 或 E 时相同，但是尾部的零不会被移除。 |
| 0             | 在指定填充 padding 的数字左边放置零（0），而不是空格（参见 width 子说明符）。 |



| width（宽度） | 描述                                                         |
| :------------ | :----------------------------------------------------------- |
| (number)      | 要输出的字符的最小数目。如果输出的值短于该数，结果会用空格填充。如果输出的值长于该数，结果不会被截断。 |
| *             | 宽度在 format 字符串中未指定，但是会作为附加整数值参数放置于要被格式化的参数之前。 |



| .precision（精度） | 描述                                                         |
| :----------------- | :----------------------------------------------------------- |
| .number            | 对于整数说明符（d、i、o、u、x、X）：precision 指定了要写入的数字的最小位数。如果写入的值短于该数，结果会用前导零来填充。如果写入的值长于该数，结果不会被截断。精度为 0 意味着不写入任何字符。 对于 e、E 和 f 说明符：要在小数点后输出的小数位数。 对于 g 和 G 说明符：要输出的最大有效位数。 对于 s: 要输出的最大字符数。默认情况下，所有字符都会被输出，直到遇到末尾的空字符。 对于 c 类型：没有任何影响。 当未指定任何精度时，默认为 1。如果指定时不带有一个显式值，则假定为 0。 |
| .*                 | 精度在 format 字符串中未指定，但是会作为附加整数值参数放置于要被格式化的参数之前。 |



| length（长度） | 描述                                                         |
| :------------- | :----------------------------------------------------------- |
| h              | 参数被解释为短整型或无符号短整型（仅适用于整数说明符：i、d、o、u、x 和 X）。 |
| l              | 参数被解释为长整型或无符号长整型，适用于整数说明符（i、d、o、u、x 和 X）及说明符 c（表示一个宽字符）和 s（表示宽字符字符串）。 |
| L              | 参数被解释为长双精度型（仅适用于浮点数说明符：e、E、f、g 和 G）。 |

- **附加参数** -- 根据不同的 format 字符串，函数可能需要一系列的附加参数，每个参数包含了一个要被插入的值，替换了 format 参数中指定的每个 % 标签。参数的个数应与 % 标签的个数相同。

## 返回值

如果成功，则返回写入的字符总数，否则返回一个负数。

## 实例

下面的实例演示了 printf() 函数的用法。

## 实例

```c
#include <stdio.h>
 
int main ()
{
   int ch;
 
   for( ch = 75 ; ch <= 100; ch++ ) {
      printf("ASCII 值 = %d, 字符 = %c\n", ch , ch );
   }
 
   return(0);
}
```



让我们编译并运行上面的程序，这将产生以下结果：

```c
ASCII 值 = 75, 字符 = K
ASCII 值 = 76, 字符 = L
ASCII 值 = 77, 字符 = M
ASCII 值 = 78, 字符 = N
ASCII 值 = 79, 字符 = O
ASCII 值 = 80, 字符 = P
ASCII 值 = 81, 字符 = Q
ASCII 值 = 82, 字符 = R
ASCII 值 = 83, 字符 = S
ASCII 值 = 84, 字符 = T
ASCII 值 = 85, 字符 = U
ASCII 值 = 86, 字符 = V
ASCII 值 = 87, 字符 = W
ASCII 值 = 88, 字符 = X
ASCII 值 = 89, 字符 = Y
ASCII 值 = 90, 字符 = Z
ASCII 值 = 91, 字符 = [
ASCII 值 = 92, 字符 = \
ASCII 值 = 93, 字符 = ]
ASCII 值 = 94, 字符 = ^
ASCII 值 = 95, 字符 = _
ASCII 值 = 96, 字符 = `
ASCII 值 = 97, 字符 = a
ASCII 值 = 98, 字符 = b
ASCII 值 = 99, 字符 = c
ASCII 值 = 100, 字符 = d
```

以下实例输出各种格式化数据：

## 实例

\#include <stdio.h> int main() {   char ch = 'A';   char str[20] = "www.runoob.com";   float flt = 10.234;   int no = 150;   double dbl = 20.123456;   printf("字符为 %c \n", ch);   printf("字符串为 %s \n" , str);   printf("浮点数为 %f \n", flt);   printf("整数为 %d\n" , no);   printf("双精度值为 %lf \n", dbl);   printf("八进制值为 %o \n", no);   printf("十六进制值为 %x \n", no);   return 0; }

执行输出结果为：

```
字符为 A 
字符串为 www.runoob.com 
浮点数为 10.234000 
整数为 150
双精度值为 20.123456 
八进制值为 226 
十六进制值为 96 
```

### 规定符

- **%d** 十进制有符号整数
- **%u** 十进制无符号整数
- **%f** 浮点数
- **%s** 字符串
- **%c** 单个字符
- **%p** 指针的值
- **%e** 指数形式的浮点数
- **%x, %X** 无符号以十六进制表示的整数
- **%o** 无符号以八进制表示的整数
- **%g** 把输出的值按照 %e 或者 %f 类型中输出长度较小的方式输出
- **%p** 输出地址符
- **%lu** 32位无符号整数
- **%llu** 64位无符号整数
- **%%** 输出百分号字符本身。

除了格式化说明符之外，printf() 函数还支持一些标志和选项，用于控制输出的精度、宽度、填充字符和对齐方式等。例如：

- %-10s：左对齐并占用宽度为 10 的字符串；
- %5.2f：右对齐并占用宽度为 5，保留两位小数的浮点数；
- %#x：输出带有 0x 前缀的十六进制数。

printf() 函数也支持变长参数列表，可以使用省略号 **...** 来表示，用于指定要输出的多个值。在函数内部，可以使用 va_start() 和 va_end() 宏来访问变长参数列表中的值。例如：

## 实例

```c
\#include <stdio.h>
\#include <stdarg.h>

void print_values(int count, ...)
{
  va_list args;
  va_start(args, count);
  for (int i = 0; i < count; i++) {
    printf("%d ", va_arg(args, int));
  }
  va_end(args);
}

int main()
{
  print_values(3, 1, 2, 3); *// 输出 "1 2 3"*
  return 0;
}
```

执行输出结果为：

```
1 2 3
```



占位符就是先占住一个固定的位置，等着你再往里面添加内容的符号，广泛用于计算机中各类文档的编辑。

格式占位符 % 是在 C/C++ 语言中格式输入函数，如 scanf、printf 等函数中使用。其意义就是起到格式占位的意思，表示在该位置有输入或者输出。

-  %d, %i 代表整数
-  %f 浮点
-  %s 字符串
-  %c char
-  %p 指针
-  %fL 长log
-  %e 科学计数
-  %g 小数或科学计数。
-  %a,%A 读入一个浮点值(仅C99有效)。
-  %c 读入一个字符。
-  %d 读入十进制整数。
-  %i 读入十进制，八进制，十六进制整数。
-  %o 读入八进制整数。
-  %x,%X 读入十六进制整数。
-  %s 读入一个字符串，遇空格、制表符或换行符结束。
-  %f,%F,%e,%E,%g,%G 用来输入实数，可以用小数形式或指数形式输入。
-  %p 读入一个指针。
-  %u 读入一个无符号十进制整数。
-  %n 至此已读入值的等价字符数。
-  %[] 扫描字符集合。
-  %% 读 % 符号

实例：

```
scanf("%d,%d,%d",&a,&b,&c); // 从键盘输入三个整数，用逗号分隔 　 
scanf("%c", &s); // 从键盘输入一个字符 　 
scanf("%f", &f); // 从键盘输入一个浮点型数据 　 
printf("%d\n",a); // 输出一个整数 　 
printf("%f\n",b); // 输出一个浮点数 　 
printf("%s\n",c); // 输出一个字符, 其中\n表示换行
```